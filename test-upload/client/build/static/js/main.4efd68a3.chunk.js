(this["webpackJsonptest-upload"]=this["webpackJsonptest-upload"]||[]).push([[0],{196:function(e,t,n){},197:function(e,t,n){},206:function(e,t){},208:function(e,t){},218:function(e,t){},220:function(e,t){},247:function(e,t){},248:function(e,t){},253:function(e,t){},255:function(e,t){},262:function(e,t){},281:function(e,t){},313:function(e,t,n){"use strict";n.r(t);var o,c,i=n(10),l=n.n(i),a=n(176),r=n.n(a),s=(n(196),n(197),n(105)),d=n.n(s),u=n(177),j=n(189),h=n(190),g=n(316),p=n(64),O=(n(199),n(315),n(314),n(179)),f=n.n(O),b=n(106),v=n(59),x=n.n(v),S=x()(o||(o=Object(b.a)(["\nquery {\n  googleCloudAuth\n}"]))),C=x()(c||(c=Object(b.a)(["\nquery {\n  googleCloudStorage\n}"]))),F=n(17),m=!1;function A(e){var t=Object(g.useQuery)(C),n=t.loadingCloudStorage,o=t.googleCloudStorageWrapper;if(!n&&!p.a.apps.length){var c,l=(null===o||void 0===o||null===(c=o.data)||void 0===c?void 0:c.googleCloudStorage)||{};l=JSON.parse(l),console.log(l);try{p.a.initializeApp(l)}catch(w){console.error("Firebase initialization error raised",w.stack)}}var a=Object(g.useQuery)(S),r=a.loadingGoogleCloudAuth,s=a.googleCloudAuthWrapper;if(!r&&!m){var O,b,v=(null===s||void 0===s||null===(O=s.data)||void 0===O?void 0:O.googleCloudAuth)||["",""];v=JSON.parse(v),console.log(v),(b=p.a.auth()).signInWithEmailAndPassword.apply(b,Object(h.a)(v)).then((function(e){})).catch((function(e){var t=e.code,n=e.message;console.log(t+": "+n)})),m=!0}var x=Math.floor((new Date).getTime())+f()({length:6}),A=p.a.storage().ref().child(x),T=Object(i.useState)({selectedFile:null}),y=Object(j.a)(T,2),D=y[0],E=y[1],_=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(new FormData).append("myFile",D.selectedFile,D.selectedFile.name),console.log(D.selectedFile),e.next=5,A.put(D.selectedFile).then((function(e){return console.log("Uploading started"),e.ref.getDownloadURL()})).then((function(e){console.log("Uploaded:"),console.log({asset:e})})).catch((function(e){throw e}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{children:[Object(F.jsx)("h1",{children:"Upload Image"}),Object(F.jsxs)("div",{children:[Object(F.jsx)("input",{type:"file",onChange:function(e){E({selectedFile:e.target.files[0]})},accept:"image/*"}),Object(F.jsx)("button",{onClick:_,children:"Upload!"})]}),Object(F.jsx)("aside",{children:D.selectedFile?Object(F.jsxs)("div",{children:[Object(F.jsx)("h2",{children:" Image Selected from computer: "}),Object(F.jsxs)("p",{children:[" Filename: ",D.selectedFile.name," "]}),Object(F.jsxs)("p",{children:[" File Type: ",D.selectedFile.type," "]}),Object(F.jsxs)("p",{children:["Last Modified: "," "," ",D.selectedFile.lastModifiedDate.toDateString()," "]})]}):Object(F.jsxs)("div",{children:[Object(F.jsx)("br",{}),Object(F.jsx)("h4",{children:" Choose file, then upload! "})," "]})}),Object(F.jsxs)("article",{children:[Object(F.jsx)("h2",{children:" Debug Google Cloud Service Account details: "}),Object(F.jsxs)("p",{children:[" ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).GOOGLE_APPLICATION_CREDENTIALS," "]})]})]})}var T=new(n(188).a)({uri:"/graphql"});var y=function(){return Object(F.jsx)(g.ApolloProvider,{client:T,children:Object(F.jsx)("main",{className:"App",children:Object(F.jsx)(A,{})})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,l=t.getTTFB;n(e),o(e),c(e),i(e),l(e)}))};r.a.render(Object(F.jsx)(l.a.StrictMode,{children:Object(F.jsx)(y,{})}),document.getElementById("root")),D()}},[[313,1,2]]]);
//# sourceMappingURL=main.4efd68a3.chunk.js.map